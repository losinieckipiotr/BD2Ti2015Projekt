<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:Stocktaking="clr-namespace:Stocktaking" xmlns:local="clr-namespace:Stocktaking.View"  x:Class="Stocktaking.View.Rooms" 
             mc:Ignorable="d" 
             d:DesignHeight="441" d:DesignWidth="686"
             FontSize="15" IsVisibleChanged="UserControl_IsVisibleChanged">
    <UserControl.Resources>
        <!--CollectionViewSource x:Key="salaViewSource" d:DesignSource="{d:DesignInstance {x:Type Stocktaking:sala}, CreateList=True}"/-->
        <CollectionViewSource x:Key="sala_typViewSource" d:DesignSource="{d:DesignInstance {x:Type Stocktaking:sala_typ}, CreateList=True}"/>
        <CollectionViewSource x:Key="zakladViewSource" d:DesignSource="{d:DesignInstance {x:Type Stocktaking:zaklad}, CreateList=True}"/>
        <CollectionViewSource x:Key="roomRecordViewSource" d:DesignSource="{d:DesignInstance {x:Type local:RoomRecord}, CreateList=True}"/>
    </UserControl.Resources>
    <Grid Background="White" DataContext="{StaticResource roomRecordViewSource}">
        <Grid.RowDefinitions>
            <RowDefinition Height="2*"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="459*"/>
            <ColumnDefinition Width="227*"/>
        </Grid.ColumnDefinitions>
        <!--Panel do edycji i dodawania sal-->
        <Border BorderThickness="1" BorderBrush="Black" Grid.Column="1" Grid.Row="0" Margin="5,10,9,0" Height="310" VerticalAlignment="Top" Grid.RowSpan="2">
            <StackPanel Margin="5,9" DataContext="{StaticResource roomRecordViewSource}">
                <StackPanel Orientation="Horizontal">
                    <Label Content="Id:"/>
                    <!-- do tego labela zbindować id sali, która bedzie zaznaczona w dataGridzie-->
                    <Label FontWeight="Bold"  x:Name="RoomId" Content="{Binding id, Mode=OneWay, NotifyOnSourceUpdated=False, NotifyOnTargetUpdated=False, UpdateSourceTrigger=Explicit}"/>
                </StackPanel>
                <Label Content="Numer:"/>
                <TextBox Margin="15,0" PreviewTextInput="Number_PreviewTextInput" x:Name="RoomNumber" Text="{Binding numer, Mode=OneWay, NotifyOnSourceUpdated=False, NotifyOnTargetUpdated=False, UpdateSourceTrigger=Explicit}"/>
                <Label Content="Pojemność:"/>
                <TextBox Margin="15,0" PreviewTextInput="Number_PreviewTextInput" x:Name="RoomCapacity" Text="{Binding pojemnosc, Mode=OneWay, NotifyOnSourceUpdated=False, NotifyOnTargetUpdated=False, UpdateSourceTrigger=Explicit}" />
                <Label Content="Rodzaj sali:"/>
                <ComboBox Margin="15,0" x:Name="RoomType" ItemsSource="{Binding Source={StaticResource sala_typViewSource}}" DisplayMemberPath="typ_sali"/>
                <Label Content="Zakład:"/>
                <TextBlock TextWrapping="Wrap" Text="{Binding zaklad.nazwa}" Margin ="15,0" x:Name="RoomInstitute" HorizontalAlignment="Left" MaxWidth="170"/>
            </StackPanel>
        </Border>

        <!--Przyciski-->
        <StackPanel Grid.Column="1" Grid.Row="1" Margin="10">
            <Button x:Name="RoomUpdate" Content="Aktualizuj" Click="RoomUpdate_Click"/>
            <Button x:Name="RoomAdd" Click="RoomAdd_Click" Content="Dodaj" Margin="0,15,0,0"/>
            <Button x:Name="RoomDelete" Click="RoomDelete_Click" Content="Usuń" Margin="0,15,0,0"/>
        </StackPanel>
        <Label Content="Lista sal:"/>
        <!-- zrobić Binding z salami to datagrid sie skonfiguruje-->
        <DataGrid x:Name="salaDataGrid"  DataContext="{StaticResource roomRecordViewSource}" EnableRowVirtualization="True" Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Margin="10,28,10,10" ItemsSource="{Binding}" AutoGenerateColumns="False" SelectionChanged="salaDataGrid_SelectionChanged" IsReadOnly="True" IsManipulationEnabled="True">
            <DataGrid.Columns>
                <DataGridTextColumn x:Name="salaIdColumn" Binding="{Binding id}" Header="Id" IsReadOnly="True" Width="30" MinWidth="30" />
                <DataGridTextColumn x:Name="salaNumerColumn" Binding="{Binding numer}" Header="Numer" IsReadOnly="True"/>
                <DataGridTextColumn x:Name="salaTypColumn" Binding="{Binding typSali}" Header="Typ sali"  IsReadOnly="True" MinWidth="40" Width="Auto" SortMemberPath="{Binding /sala_typ, Source={StaticResource roomRecordViewSource}}"/>
                <DataGridTextColumn x:Name="salaPojemnoscColumn" IsReadOnly="True" Binding="{Binding pojemnosc}" Header="Pojemność"/>
                <DataGridTextColumn x:Name="salaZakladColumn" Header="Zakład" MinWidth="90" Binding="{Binding zaklad}" IsReadOnly="True" SortMemberPath="{Binding Source={StaticResource zakladViewSource}}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
